
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Differences between OpenCV JavaCV and OpenCV4Android - Hujiawei Bujidao</title>
  <meta name="author" content="hujiawei">

  
  <meta name="description" content="最近我在考虑是否要改变XFace项目的技术方案，经过一番调研后我得到下面的结果。 本文将介绍OpenCV，JavaCV以及OpenCV for Android(以下简称OpenCV4Android)之间的区别，并以一个人脸识别的Android应用为例，详细介绍可以采用的实践方案。 OpenCV: &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://hujiaweibujidao.github.io/blog/2014/10/23/differences-between-opencv-javacv-and-opencv4android">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Hujiawei Bujidao" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <!--
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  -->
  <script type='text/javascript' src='http://ajax.useso.com/ajax/libs/jquery/1.7.2/jquery.min.js?ver=3.4.2'></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<!--
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
-->
<link href="http://fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
  <!--
  

  -->
</head>

<body   >

	<header role="banner">
		
<hgroup style="text-align: center">
	<h1><a href="/"><img src="/images/conan-paper-small.png"  />Hujiawei Bujidao<img src="/images/conan-hat-small.png"  /></a></h1>
	
	<h2>I will always be your savior! A secret makes a man man!</h2>
	
</hgroup>


	</header>
	<nav role="navigation">
		<ul class="subscription" data-subscription="rss">
  <!--<li><a href="https://github.com/hujiaweibujidao" rel="subscribe-rss" title="subscribe via RSS">View me on GitHub</a></li>-->
  
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
  <!--
  
  --> 
</ul>
<!--
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:hujiaweibujidao.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form> 
  
-->
<ul class="main-navigation">
  <li><a href="/blog/archives/">Blog</a></li>
  <li><a href="/aboutme/">AboutMe</a></li>
  <li><a href="/math/">Math</a></li>
  <li><a href="/python/">Python</a></li>
  <li><a href="/mobile/">Mobile</a></li>
  
  <li><a href="/blog/categories/algorithm/">Algorithms</a></li>
  <li><a href="/blog/categories/oj/">OJSolutions</a></li>
  <!--
  <li><a href="/blog/categories/mobiledev/">MobileDev</a></li>
  <li><a href="/datamining/">ML-DM-PR</a></li>
  -->
  <li><a href="/blog/categories/music/">Music</a></li>
  <li><a href="/blog/categories/picture/">Picture</a></li>
  <!--
  <li><a href="/xjava/">XJava</a></li>
  -->
  <!-- <li><a href="/datamining/">Projects</a></li> -->
</ul>


	</nav>
	<div id="main">
		<div id="content">
			<div>

<article class="hentry" role="article">
		
  <header>
    
      <h1 class="entry-title">Differences Between OpenCV JavaCV and OpenCV4Android</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-10-23T20:00:00+08:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>最近我在考虑是否要改变XFace项目的技术方案，经过一番调研后我得到下面的结果。</p>

<p>本文将介绍OpenCV，JavaCV以及OpenCV for Android(以下简称OpenCV4Android)之间的区别，并以一个人脸识别的Android应用为例，详细介绍可以采用的实践方案。</p>

<p>OpenCV: <a href="http://docs.opencv.org/index.html">http://docs.opencv.org/index.html</a></p>

<p>OpenCV4Android: <a href="http://docs.opencv.org/doc/tutorials/introduction/android_binary_package/O4A_SDK.html">OpenCV4Android_SDK.html</a></p>

<p>JavaCV: <a href="https://github.com/bytedeco/javacv">https://github.com/bytedeco/javacv</a></p>

<h3 id="opencvjavacvopencv4android">OpenCV，JavaCV，OpenCV4Android</h3>

<h4 id="javacvopencv4android">(1) <strong>JavaCV和OpenCV4Android没有关系</strong></h4>

<p>OpenCV是C++版本的开源计算机视觉库；JavaCV是对OpenCV的Java封装，开发团队和OpenCV开发团队没有关系；OpenCV4Android也是对OpenCV的封装以使其能够应用于Android平台，开发团队是OpenCV开发团队的一部分，也就是OpenCV4Android和JavaCV没有任何关系！</p>

<p>参考网址：<a href="https://groups.google.com/forum/#!topic/javacv/qJmBLvpV7cM">https://groups.google.com/forum/#!topic/javacv/qJmBLvpV7cM</a></p>

<blockquote>
  <p>android-opencv has no relation to JavaCV, so you should ask somewhere else for questions about it.. The philosophy of android-opencv (and of the OpenCV team as general) is to make OpenCV run on Android, which forces them to use Java, but otherwise they prefer to use C++ or Python. With JavaCV, my hope is to have it run on as many platforms as possible, including Android, since it supports (some sort of) Java, so we can use sane(r) and more efficient languages such as the Java and Scala languages. Take your pick!</p>
</blockquote>

<h4 id="javacvopencv">(2) <strong>JavaCV和OpenCV的性能比较</strong></h4>

<p>大多数时候两者性能相差不大，某些OpenCV函数能够并行化处理而JavaCV不行，但是JavaCV还绑定了很多其他的图像处理库，功能也足够强大。</p>

<p>参考网址：<a href="http://stackoverflow.com/questions/21207755/opencv-javacv-vs-opencv-c-c-interfaces">http://stackoverflow.com/questions/21207755/opencv-javacv-vs-opencv-c-c-interfaces</a></p>

<blockquote>
  <p>I’d like to add a couple of things to @ejbs’s answer.     <br />
First of all, you concerned 2 separate issues:     <br />
Java vs. C++ performance     <br />
OpenCV vs JavaCV     <br />
Java vs. C++ performance is a long, long story. On one hand, C++ programs are compiled to a highly optimized native code. They start quickly and run fast all the time without pausing for garbage collection or other VM duties (as Java do). On other hand, once compiled, program in C++ can’t change, no matter on what machine they are run, while Java bytecode is compiled “just-in-time” and is always optimized for processor architecture they run on. In modern world, with so many different devices (and processor architectures) this may be really significant. Moreover, some JVMs (e.g. Oracle Hotspot) can optimize even the code that is already compiled to native code! VM collect data about program execution and from time to time tries to rewrite code in such a way that it is optimized for this specific execution. So in such complicated circumstances the only real way to compare performance of implementations in different programming languages is to just run them and see the result.      <br />
OpenCV vs. JavaCV is another story. First you need to understand stack of technologies behind these libraries.       <br />
OpenCV was originally created in 1999 in Intel research labs and was written in C. Since that time, it changed the maintainer several times, became open source and reached 3rd version (upcoming release). At the moment, core of the library is written in C++ with popular interface in Python and a number of wrappers in other programming languages.
JavaCV is one of such wrappers. So in most cases when you run program with JavaCV you actually use OpenCV too, just call it via another interface. But JavaCV provides more than just one-to-one wrapper around OpenCV. In fact, it bundles the whole number of image processing libraries, including FFmpeg, OpenKinect and others. (Note, that in C++ you can bind these libraries too).       <br />
So, in general it doesn’t matter what you are using - OpenCV or JavaCV, you will get just about same performance. It more depends on your main task - is it Java or C++ which is better suited for your needs.      <br />
There’s one more important point about performance. Using OpenCV (directly or via wrapper) you will sometimes find that OpenCV functions overcome other implementations by several orders. This is because of heavy use of low-level optimizations in its core. For example, OpenCV’s filter2D function is SIMD-accelerated and thus can process several sets of data in parallel. And when it comes to computer vision, such optimizations of common functions may easily lead to significant speedup.       </p>
</blockquote>

<h4 id="android">(3) <strong>人脸识别的Android应用</strong></h4>

<h4 id="section"><strong>对人脸识别算法的支持</strong></h4>

<p>目前OpenCV的最新版本是2.4.10，OpenCV4Android是2.4.9，JavaCV的版本是0.9</p>

<p>OpenCV自然支持人脸识别算法，详细的使用教程看<a href="http://docs.opencv.org/modules/contrib/doc/facerec/index.html">这里</a></p>

<p>OpenCV4Android暂时不支持，但是可以通过建立一层简单的封装来实现，封装的方法看<a href="http://stackoverflow.com/questions/25830660/face-recognize-using-opencv4android-sdk-tutorial">这里</a></p>

<p>JavaCV现在已经支持人脸识别算法了，在Samples中可以找到一份样例代码<a href="https://github.com/bytedeco/javacv/blob/master/samples/OpenCVFaceRecognizer.java">OpenCVFaceRecognizer.java</a></p>

<h4 id="section-1"><strong>不可忽视的摄像头！</strong></h4>

<p>因为是移动应用，所以要能够从移动设备中获取摄像头返回的数据是关键！而这个恰恰是这类应用要考虑的一个重要因素，因为它直接决定了你的应用需要使用的技术方案！</p>

<p>关于摄像头的使用其实我已经在前面的博文<a href="http://hujiaweibujidao.github.io/blog/2013/11/18/android-ndk-and-opencv-development-3/">Android Ndk and Opencv Development 3</a>中详细介绍过了，这里我引用部分内容，如果想了解更多的话，不妨先看下前面的内容。 [下面提到的<code>OpenCV library</code> 是 <code>OpenCV4Android SDK</code> 的一部分]</p>

<p>[其实还有一种获取摄像头数据的方式，那就是直接在Native层操作摄像头，OpenCV4Android SDK的Samples中提供了一个样例<code>native-activity</code>，这种方式其实是极其不推荐使用的，一方面代码不好写，不便操作；另一方面据说这部分的API经常变化，不便维护]</p>

<p>(1) 关于如何进行和OpenCV有关的摄像头开发</p>

<p>在没有OpenCV library的情况下，也就是我们直接使用Android中的Camera API的话，获取得到的图像帧是<code>YUV</code>格式的，我们在处理之前往往要先转换成<code>RGB(A)</code>格式的才行。</p>

<p>如果有了OpenCV library的话摄像头的开发就简单多了，可以参见OpenCV for Android中的三个Tutorial(<code>CameraPreview</code>, <code>MixingProcessing</code>和<code>CameraControl</code>)，源码都在OpenCV-Android sdk的samples目录下，这里简单介绍下：OpenCV Library中提供了两种摄像头，一种是Java摄像头-<code>org.OpenCV.Android.JavaCameraView</code>，另一种是Native摄像头-<code>org.OpenCV.Android.NativeCameraView</code> (可以运行CameraPreview这个项目来体验下两者的不同，其实差不多)。两者都继承自<code>CameraBridgeViewBase</code>这个抽象类，但是JavaCamera使用的就是Android SDK中的<code>Camera</code>，而NativeCamera使用的是OpenCV中的<code>VideoCapture</code>。</p>

<p>(2) 关于如何传递摄像头预览的图像数据给Native层</p>

<p>这个很重要！我曾经试过很多的方式，大致思路有：</p>

<p>①传递图片路径：这是最差的方式，我使用过，速度很慢，实时性很差，主要用于前期开发的时候进行测试，测试Java层和Native层的互调是否正常。   </p>

<p>②传递预览图像的字节数组到Native层，然后将字节数组处理成<code>RGB</code>或者<code>RGBA</code>的格式[具体哪种格式要看你的图像处理函数能否处理<code>RGBA</code>格式的，如果可以的话推荐转换成<code>RGBA</code>格式，因为返回的也是<code>RGBA</code>格式的]。网上有很多的文章讨论如何转换：一种方式是使用一个自定义的函数进行编码转换(可以搜索到这个函数，例如这篇文章<a href="http://nhenze.net/?p=253">Camera image-&gt;NDK-&gt;OpenGL texture</a>)，另一个种方式是使用OpenCV中的<code>Mat</code>和<code>cvtColor</code>函数进行转换，接着调用图像处理函数，处理完成之后，将处理的结果保存在一个整形数组中(实际上就是<code>RGB</code>或者<code>RGBA</code>格式的图像数据)，最后调用Bitmap的方法将其转换成bitmap返回。这种方法速度也比较慢，但是比第一种方案要快了不少，具体实现过程可以看推荐书籍<a href="https://github.com/MasteringOpenCV">《Mastering OpenCV with Practical Computer Vision Projects》</a>，第一章<code>Cartoonifer and Skin Changer for Android</code>就是一个Android的应用实例。   </p>

<p>③使用OpenCV的摄像头：JavaCamera或者NativeCamera都行，好处是它进行了很多的封装，可以直接将预览图像的<code>Mat</code>结构传递给Native层，这种传递是使用<code>Mat</code>的内存地址(<code>long</code>型)，Native层只要根据这个地址将其封装成<code>Mat</code>就可以进行处理了，另外，它的回调函数的返回值也是<code>Mat</code>，非常方便！这种方式速度较快。具体过程可以参考OpenCV-Android sdk的samples项目中的<code>Tutorial2-MixedProcessing</code>。 </p>

<h4 id="section-2"><strong>可选方案有哪些？</strong></h4>

<p>综上所述，我们来总结下如果想要开发一个人脸识别的Android应用程序，大致会有哪些技术方案呢？</p>

<p>(1) 摄像头使用纯Android Camera API，将<code>YUV</code>格式的数据传入到Native层，转换成<code>RGB(A)</code> 格式，然后调用OpenCV人脸识别算法进行处理，最后将处理结果<code>RGB(A)</code> 格式数据返回给Java层。优点是对其他内容的依赖较少，灵活性好，开发者甚至可以对内部算法进行修改，缺点自然是需要开发者具有很强的技术水平，要同时熟练OpenCV和Android NDK开发，在三星Galaxy I9000上测试比较慢，有明显卡顿延迟。</p>

<p>这种方式可以参考书籍<a href="https://github.com/MasteringOpenCV">《Mastering OpenCV with Practical Computer Vision Projects》</a> 的第一章<code>Cartoonifer and Skin Changer for Android</code> 的实现方式。 &gt; <a href="http://hujiaweibujidao.github.io/files/Cartoonifier_Android.zip">我测试通过的源码下载</a></p>

<p>最近发现一个项目也是采用这种方式，而且代码质量较高，可惜的是并没有公开Native层代码，而只是提供了Java层的SDK，<a href="https://github.com/Vinisoft/Face-Recognition-SDK-for-Android">详情可见这里</a></p>

<p>(2) 摄像头使用纯Android Camera API，将<code>YUV</code>格式的数据直接在Java层转换成<code>RGB(A)</code> 格式，直接传给JavaCV人脸识别算法进行处理，然后返回识别结果即可。优点是只依赖了JavaCV，缺点是从OpenCV算法转成JavaCV实现需要些工作量。</p>

<p>这种方式我没有试验过，转换的方式可以参考<a href="http://stackoverflow.com/questions/16471884/opencv-for-android-convert-camera-preview-from-yuv-to-rgb-with-imgproc-cvtcolor">这里</a> <strong>[我会尽快试验一下，如果可行我会将代码公开]</strong></p>

<p>(3) 摄像头使用OpenCV4Android Library，将得到的数据<code>Mat</code> 的内存地址传给Native层，Native层通过地址还原成<code>Mat</code>，然后调用OpenCV人脸识别算法进行处理，最后将处理结果<code>RGB(A)</code> 格式数据返回给Java层。优点是灵活性好，缺点是依赖了OpenCV4Android Library和OpenCV，所以需要掌握OpenCV和Android NDK开发，在三星Galaxy I9000上测试还行，如果算法处理比较慢的话会慢1-3s左右才返回结果。</p>

<p>这种方式可以参考OpenCV-Android sdk的samples项目中的<code>Tutorial2-MixedProcessing</code> [我的开源项目<code>XFace</code>采用的正是这种方案]</p>

<p>(4) 摄像头使用OpenCV4Android Library，Native层对OpenCV人脸识别算法类进行简单封装，然后将摄像头得到的数据<code>Mat</code> 直接传给OpenCV4Android Library的人脸识别算法，然后返回识别结果即可。优点是依赖还不算多而且可能要写的Native层代码也不多。</p>

<p>这种方式我试验过，利用前面提到过封装的方法，可以参考<a href="http://stackoverflow.com/questions/25830660/face-recognize-using-opencv4android-sdk-tutorial">这里</a>，注意按照答案的例子在加载<code>facerec</code> 库之前要记得加载<code>opencv_java</code> 库才行！ &gt;<a href="http://hujiaweibujidao.github.io/files/NDKDemo.zip">我测试通过的源码下载</a></p>

<p>(5) 摄像头使用OpenCV4Android Library，然后将摄像头得到的数据<code>Mat</code> 直接传给JavaCV的人脸识别算法，然后返回识别结果即可。优点是看起来方案很不错，只需要写Java代码就行了，Native层可能只需要导入一些<code>*so</code> 文件到<code>jniLibs</code> 目录中就行了，缺点是依赖太多了！</p>

<p>这种方式可以参考<a href="https://github.com/ayuso2013/face-recognition">Github上的这个项目</a>     &gt; <a href="http://hujiaweibujidao.github.io/files/face-recognition-ayuso.zip">我测试通过的源码下载</a></p>

<p>各种方案各有利弊，一方面要考虑技术方案是否可行，另一方面还要考虑该技术方案是否便于开发！哎，码农真是伤不起啊！</p>

<p><strong>补充部分</strong></p>

<p>这里假设你是按照我上一篇文章<a href="http://hujiaweibujidao.github.io/blog/2014/10/22/android-ndk-and-opencv-development-with-android-studio/">Android NDK and OpenCV Development With Android Studio</a> 的方式来创建的项目。</p>

<p>(1) 方案1中的部分代码</p>

<p>实现将<code>YUV</code> 格式数据转换成 <code>RGBA</code> 格式数据的Native层代码</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="c1">// Just show the plain camera image without modifying it.</span>
</span><span class="line"><span class="n">JNIEXPORT</span> <span class="kt">void</span> <span class="n">JNICALL</span> <span class="nf">Java_com_Cartoonifier_CartoonifierView_ShowPreview</span><span class="o">(</span><span class="n">JNIEnv</span><span class="o">*</span> <span class="n">env</span><span class="o">,</span> <span class="n">jobject</span><span class="o">,</span>
</span><span class="line">        <span class="n">jint</span> <span class="n">width</span><span class="o">,</span> <span class="n">jint</span> <span class="n">height</span><span class="o">,</span> <span class="n">jbyteArray</span> <span class="n">yuv</span><span class="o">,</span> <span class="n">jintArray</span> <span class="n">bgra</span><span class="o">)</span>
</span><span class="line"><span class="o">{</span>
</span><span class="line">    <span class="c1">// Get native access to the given Java arrays.</span>
</span><span class="line">    <span class="n">jbyte</span><span class="o">*</span> <span class="n">_yuv</span>  <span class="o">=</span> <span class="n">env</span><span class="o">-&gt;</span><span class="n">GetByteArrayElements</span><span class="o">(</span><span class="n">yuv</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span><span class="line">    <span class="n">jint</span><span class="o">*</span>  <span class="n">_bgra</span> <span class="o">=</span> <span class="n">env</span><span class="o">-&gt;</span><span class="n">GetIntArrayElements</span><span class="o">(</span><span class="n">bgra</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Prepare a cv::Mat that points to the YUV420sp data.</span>
</span><span class="line">    <span class="n">Mat</span> <span class="nf">myuv</span><span class="o">(</span><span class="n">height</span> <span class="o">+</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">CV_8UC1</span><span class="o">,</span> <span class="o">(</span><span class="n">uchar</span> <span class="o">*)</span><span class="n">_yuv</span><span class="o">);</span>
</span><span class="line">    <span class="c1">// Prepare a cv::Mat that points to the BGRA output data.</span>
</span><span class="line">    <span class="n">Mat</span> <span class="nf">mbgra</span><span class="o">(</span><span class="n">height</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">CV_8UC4</span><span class="o">,</span> <span class="o">(</span><span class="n">uchar</span> <span class="o">*)</span><span class="n">_bgra</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Convert the color format from the camera&#39;s</span>
</span><span class="line">    <span class="c1">// NV21 &quot;YUV420sp&quot; format to an Android BGRA color image.</span>
</span><span class="line">    <span class="n">cvtColor</span><span class="o">(</span><span class="n">myuv</span><span class="o">,</span> <span class="n">mbgra</span><span class="o">,</span> <span class="n">CV_YUV420sp2BGRA</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// OpenCV can now access/modify the BGRA image if we want ...</span>
</span><span class="line">
</span><span class="line">    <span class="c1">// Release the native lock we placed on the Java arrays.</span>
</span><span class="line">    <span class="n">env</span><span class="o">-&gt;</span><span class="n">ReleaseIntArrayElements</span><span class="o">(</span><span class="n">bgra</span><span class="o">,</span> <span class="n">_bgra</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span><span class="line">    <span class="n">env</span><span class="o">-&gt;</span><span class="n">ReleaseByteArrayElements</span><span class="o">(</span><span class="n">yuv</span><span class="o">,</span> <span class="n">_yuv</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>(2) 方案4中的部分代码 </p>

<p><code>Android.mk</code> 文件</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">LOCAL_PATH</span> <span class="o">:=</span> <span class="n">$</span><span class="o">(</span><span class="n">call</span> <span class="n">my</span><span class="o">-</span><span class="n">dir</span><span class="o">)</span>
</span><span class="line">
</span><span class="line"><span class="n">include</span> <span class="n">$</span><span class="o">(</span><span class="n">CLEAR_VARS</span><span class="o">)</span>
</span><span class="line">
</span><span class="line"><span class="err">#</span><span class="n">opencv</span>
</span><span class="line"><span class="nl">OPENCVROOT:</span><span class="o">=</span> <span class="o">/</span><span class="n">Volumes</span><span class="o">/</span><span class="n">hujiawei</span><span class="o">/</span><span class="n">Users</span><span class="o">/</span><span class="n">hujiawei</span><span class="o">/</span><span class="n">Android</span><span class="o">/</span><span class="n">opencv_sdk</span>
</span><span class="line"><span class="nl">OPENCV_CAMERA_MODULES:</span><span class="o">=</span><span class="n">on</span>
</span><span class="line"><span class="nl">OPENCV_INSTALL_MODULES:</span><span class="o">=</span><span class="n">on</span>
</span><span class="line"><span class="nl">OPENCV_LIB_TYPE:</span><span class="o">=</span><span class="n">SHARED</span>
</span><span class="line"><span class="n">include</span> <span class="n">$</span><span class="o">{</span><span class="n">OPENCVROOT</span><span class="o">}/</span><span class="n">sdk</span><span class="o">/</span><span class="kd">native</span><span class="o">/</span><span class="n">jni</span><span class="o">/</span><span class="n">OpenCV</span><span class="o">.</span><span class="na">mk</span>
</span><span class="line">
</span><span class="line"><span class="n">LOCAL_SRC_FILES</span> <span class="o">:=</span> <span class="n">facerec</span><span class="o">.</span><span class="na">cpp</span>
</span><span class="line">
</span><span class="line"><span class="n">LOCAL_LDLIBS</span> <span class="o">+=</span> <span class="o">-</span><span class="n">llog</span>
</span><span class="line"><span class="n">LOCAL_MODULE</span> <span class="o">:=</span> <span class="n">facerec</span>
</span><span class="line">
</span><span class="line"><span class="n">include</span> <span class="n">$</span><span class="o">(</span><span class="n">BUILD_SHARED_LIBRARY</span><span class="o">)</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>Application.mk</code> 文件</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">APP_STL</span> <span class="o">:=</span> <span class="n">gnustl_static</span>
</span><span class="line"><span class="n">APP_CPPFLAGS</span> <span class="o">:=</span> <span class="o">-</span><span class="n">frtti</span> <span class="o">-</span><span class="n">fexceptions</span>
</span><span class="line"><span class="n">APP_ABI</span> <span class="o">:=</span> <span class="n">armeabi</span>
</span><span class="line"><span class="n">APP_PLATFORM</span> <span class="o">:=</span> <span class="n">android</span><span class="o">-</span><span class="mi">16</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>FisherFaceRecognizer</code> 文件</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">android</span><span class="o">.</span><span class="na">hacks</span><span class="o">.</span><span class="na">ndkdemo</span><span class="o">;</span>
</span><span class="line">
</span><span class="line"><span class="kn">import</span> <span class="nn">org.opencv.contrib.FaceRecognizer</span><span class="o">;</span>
</span><span class="line">
</span><span class="line"><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FisherFaceRecognizer</span> <span class="kd">extends</span> <span class="n">FaceRecognizer</span> <span class="o">{</span>
</span><span class="line">
</span><span class="line">    <span class="kd">static</span> <span class="o">{</span>
</span><span class="line">        <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;opencv_java&quot;</span><span class="o">);</span><span class="c1">//</span>
</span><span class="line">        <span class="n">System</span><span class="o">.</span><span class="na">loadLibrary</span><span class="o">(</span><span class="s">&quot;facerec&quot;</span><span class="o">);</span><span class="c1">//</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">long</span> <span class="nf">createFisherFaceRecognizer0</span><span class="o">();</span>
</span><span class="line">
</span><span class="line">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">long</span> <span class="nf">createFisherFaceRecognizer1</span><span class="o">(</span><span class="kt">int</span> <span class="n">num_components</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">native</span> <span class="kt">long</span> <span class="nf">createFisherFaceRecognizer2</span><span class="o">(</span><span class="kt">int</span> <span class="n">num_components</span><span class="o">,</span> <span class="kt">double</span> <span class="n">threshold</span><span class="o">);</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="nf">FisherFaceRecognizer</span><span class="o">()</span> <span class="o">{</span>
</span><span class="line">        <span class="kd">super</span><span class="o">(</span><span class="n">createFisherFaceRecognizer0</span><span class="o">());</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="nf">FisherFaceRecognizer</span><span class="o">(</span><span class="kt">int</span> <span class="n">num_components</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="kd">super</span><span class="o">(</span><span class="n">createFisherFaceRecognizer1</span><span class="o">(</span><span class="n">num_components</span><span class="o">));</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line">
</span><span class="line">    <span class="kd">public</span> <span class="nf">FisherFaceRecognizer</span><span class="o">(</span><span class="kt">int</span> <span class="n">num_components</span><span class="o">,</span> <span class="kt">double</span> <span class="n">threshold</span><span class="o">)</span> <span class="o">{</span>
</span><span class="line">        <span class="kd">super</span><span class="o">(</span><span class="n">createFisherFaceRecognizer2</span><span class="o">(</span><span class="n">num_components</span><span class="o">,</span> <span class="n">threshold</span><span class="o">));</span>
</span><span class="line">    <span class="o">}</span>
</span><span class="line"><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>之后你可以测试，当然你还可以做一个完整的例子来测试这个算法是否正确</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
</pre></td><td class="code"><pre><code class="java"><span class="line"><span class="n">facerec</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FisherFaceRecognizer</span><span class="o">();</span>
</span><span class="line"><span class="n">textView</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">valueOf</span><span class="o">(</span><span class="n">facerec</span><span class="o">.</span><span class="na">getDouble</span><span class="o">(</span><span class="s">&quot;threshold&quot;</span><span class="o">)));</span><span class="c1">//1.7976xxxx</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p class="post-footer">
                        Original link:<a href="http://hujiaweibujidao.github.io/blog/2014/10/23/differences-between-opencv-javacv-and-opencv4android/">http://hujiaweibujidao.github.io/blog/2014/10/23/differences-between-opencv-javacv-and-opencv4android/</a><br />Written by <a href="http://hujiaweibujidao.github.io">hujiawei</a>&nbsp;Posted at <a href="http://hujiaweibujidao.github.io">http://hujiaweibujidao.github.io</a><br />Feel free to read or comment it, and if you want to copy it into your own site, please copy it with its Original Link showed above or you can see the license below for more details.If you have any problem or suggestion, please comment below. :-)<br />Thanks a lot. Hope you enjoy here! :-)</p>
</div>


		<footer>
			<p class="meta">
				
  

<span class="byline author vcard">Posted by <span class="fn">hujiawei</span></span>

				








  


<time datetime="2014-10-23T20:00:00+08:00" pubdate data-updated="true">Oct 23<span>rd</span>, 2014</time>
				

<span class="categories">
  
    <a class='category' href='/blog/categories/mobile/'>mobile</a>
  
</span>


			</p>
			
			<div class="sharing">
  
  
  
</div>

			
			<p class="meta">
				
				<a class="basic-alignment left" href="/blog/2014/10/22/android-ndk-and-opencv-development-with-android-studio/" title="Previous Post: Android NDK and OpenCV development with Android Studio">&laquo; Android NDK and OpenCV development with Android Studio</a>
				
				
				<a class="basic-alignment right" href="/blog/2014/10/24/love-forever-dahuaxiyou/" title="Next Post: Talk big of West Travelling">Talk big of West Travelling &raquo;</a>
				
			</p>
		</footer>
	</article>
	

	
	<section>
		<h1>Comments</h1>
		<div id="comments" aria-live="polite">
			<!-- Duoshuo Comment BEGIN   data-title=""-->
<div class="ds-thread"></div>
<script type="text/javascript">
  var duoshuoQuery = {short_name:"hujiaweibujidao"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>
<!-- Duoshuo Comment END -->

		</div>
	</section>
	
</div>

<aside class="sidebar">
  
	<section>
	<h1>关于博主</h1><br/>
  <a href="/aboutme/"><img src="/images/me-small.png" width="250px" height="210px" alt="protrait"/></a><br/>
  <p>Hi, I'm Hujiawei, from P.R.China. Now I'm a postgraduate student studying in <a href="http://www.tsinghua.edu.cn/publish/th/index.html">Tsinghua University</a>.
  Wanna know me? <a href="/aboutme/">See here.</a> 
  </p>
  
  <p style="color:red;font-size:14px;">
	  如果说"善良的心就是太阳"，那么"使徒行善"就是让善良的种子茁壮成长的雨露！只要完成简单的问卷调查任务就可以轻松获得收益去捐助那些需要帮助的人！博主最近参加了一个线上黑客马拉松比赛，<a href="https://campaign.gitcafe.com/pingpp-hackathon2014/candidates?page=2">点击进入投票网址</a>，欢迎大家访问并点赞支持第一个项目XingShan！谢谢大家！同时也欢迎大家访问<a href="http://shanshanlaichi.sinaapp.com">使徒行善网页版</a>，感兴趣的童鞋可以扫描二维码下载试用安卓客户端，有任何问题都可以回复我，谢谢大家！
  </p>
  
  <img src="/images/conan-mainperson.png" width="250px" height="210px" alt="conan"/>
  
  <br/>
  
  <a href="http://weibo.com/hujiaweiyinger"><img src="/images/sinaweibo.png" width="40px" height="40px"/></a> &nbsp;
  <a href="https://github.com/hujiaweibujidao"><img src="/images/github.png" width="40px" height="40px"/></a>&nbsp;
  <a href="http://hujiawei.tumblr.com"><img src="/images/tumblr.png" width="40px" height="40px"/></a> &nbsp;
  <a href="https://twitter.com/hujiaweiyinger"><img src="/images/twitter.png" width="40px" height="40px"/></a>&nbsp;
  <a href="http://www.douban.com/people/60272837/"><img src="/images/douban.png" width="40px" height="40px"/></a>
 
 <br/>
 <br/>
 <iframe width="100%" height="550" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=550&fansRow=2&ptype=1&speed=50&skin=1&isTitle=0&noborder=1&isWeibo=1&isFans=0&uid=1740244950&verifier=68702156&dpc=1"></iframe>
    <br/>
    <!--autoplay="autoplay" -->
    <!--
<audio width="200" height="32" 
style="margin: auto; top: 0; right: 0; bottom: 0; left: 0;" 
controls="controls" 
name="media" 
src="http://hujiaweibujidao.github.io/music/Wouldnt-It-Be-Nice.mp3">
</audio>
-->
  
  
  <!--baidu-->
  <!--
  <div class="bdsharebuttonbox"><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a><a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>  
-->

</section>
<section>
 <h1>分类目录</h1>
 <ul id="categories">
	 <li class='category'><a href='/blog/categories/acdream/'>acdream (1)</a></li>
<li class='category'><a href='/blog/categories/algorithm/'>algorithm (18)</a></li>
<li class='category'><a href='/blog/categories/android/'>android (8)</a></li>
<li class='category'><a href='/blog/categories/bestcoder/'>bestcoder (1)</a></li>
<li class='category'><a href='/blog/categories/codeforces/'>codeforces (2)</a></li>
<li class='category'><a href='/blog/categories/codejam/'>codejam (1)</a></li>
<li class='category'><a href='/blog/categories/hadoop/'>hadoop (1)</a></li>
<li class='category'><a href='/blog/categories/ios/'>ios (1)</a></li>
<li class='category'><a href='/blog/categories/mac/'>mac (2)</a></li>
<li class='category'><a href='/blog/categories/machinelearning/'>machinelearning (2)</a></li>
<li class='category'><a href='/blog/categories/math/'>math (26)</a></li>
<li class='category'><a href='/blog/categories/matlab/'>matlab (1)</a></li>
<li class='category'><a href='/blog/categories/mobile/'>mobile (9)</a></li>
<li class='category'><a href='/blog/categories/music/'>music (3)</a></li>
<li class='category'><a href='/blog/categories/octopress/'>octopress (6)</a></li>
<li class='category'><a href='/blog/categories/oj/'>oj (5)</a></li>
<li class='category'><a href='/blog/categories/opencv/'>opencv (5)</a></li>
<li class='category'><a href='/blog/categories/picture/'>picture (3)</a></li>
<li class='category'><a href='/blog/categories/python/'>python (5)</a></li>

 </ul>
</section>
<section>
  <h1>近期文章</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/11/22/codeforces-round-278-div2/">CodeForces Round 278 Div2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/18/codeforces-round-277-dot-5-div2/">CodeForces Round 277.5 Div2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/14/using-qiniu-js-sdk-to-upload-videos-in-django/">Using Qiniu JS SDK to Upload Videos in Django</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/14/acdream-java-contest/">ACdream Java Contest</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/11/09/bestcoder-round-17/">BestCoder Round 17</a>
      </li>
    
  </ul>
  
  <h1>热评文章</h1>
<!-- 多说热评文章 start -->
	<div class="ds-top-threads" data-range="daily" data-num-items="5"></div>
<!-- 多说热评文章 end -->
<!-- 多说公共JS代码 start (一个网页只需插入一次) -->
<script type="text/javascript">
var duoshuoQuery = {short_name:"hujiaweibujidao"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		 || document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>
<!-- 多说公共JS代码 end -->

</section>
<section>
	<h1>好友博客</h1>
	<ul>
		<li>
			<a href="http://doufunao.github.io/">豆腐脑的幻想乡</a>
		</li>
		<li>
			<a href="http://c4fun.cn/">Code 4 Fun</a>
		</li>
		<li>
			<a href="http://www.tanglei.name/">TangLei blog</a>
		</li>
		<li>
			<a href="http://ontheroad.sinaapp.com/">Tian Jun-Find My Way</a>
		</li>
		
		<li>
			<a href="http://www.liaoxuefeng.com/">廖雪峰的官方网站</a>
		</li>
		<li>
			<a href="http://beader.me/">Beader</a>
		</li>
		<li>
			<a href="http://blog.csdn.net/v_JULY_v">结构之法，算法之道</a>
		</li>
				<li>
			<a href="http://www.renfei.org/blog/">Renfei Song</a>
		</li>
		<li>
			<a href="http://bluedavy.me">BlueDavy之技术blog</a>
		</li>
		<li>
			<a href="http://blog.jobbole.com/category/python/">伯乐在线-Python</a>
		</li>
		<li>
			<a href="http://www.douban.com/group/python/">豆瓣小组-Python</a>
		</li>
		<li>
			<a href="#">这里会是你吗?</a>
		</li>
	</ul>
</section>
	
</aside>


		</div>
	</div>
	
	<footer role="contentinfo">
		<p>
  	Copyright &copy; 2014 - hujiawei - <a href="http://hujiaweibujidao.github.io/happybirthday/">Happy birthday to MY QUEEN</a> - <span class="credit">Proudly Powered by <a href="http://octopress.org">Octopress</a></span>
  	

<!--baidu-->
<!--
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"1","bdPos":"left","bdTop":"250"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
-->

	<!-- CNZZ -->
	&nbsp;&nbsp;
	<script type="text/javascript">
		var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");
		document.write(unescape("%3Cspan id='cnzz_stat_icon_1000165127'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "s22.cnzz.com/z_stat.php%3Fid%3D1000165127%26show%3Dpic1' type='text/javascript'%3E%3C/script%3E"));
	</script>
	
	<!--baidu share-->
	<!--
	<div class="bdsharebuttonbox" style="display: inline;"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
	-->
	<!-- license -->
	<a rel="license" href="http://creativecommons.org/licenses/by-nd/3.0/deed.zh"><img alt="知识共享许可协议" style="border-width:0" src="http://i.creativecommons.org/l/by-nd/3.0/88x31.png" /></a>
	本作品采用<a rel="license" href="http://creativecommons.org/licenses/by-nd/3.0/deed.zh">知识共享署名-禁止演绎 3.0 未本地化版本许可协议</a>进行许可。

</p>

<!--hujiawei custom blockquote-->
<!--for block quote
<style>
blockquote{
	font:inherit;
	font-size:60%;
	font-style:normal;
	line-height:1.0em;
	color:rgba(0,0,0,0.5);
}
</style>-->

<!-- gutter for code line-numbers!! -->
<!--for block quote-->
<!--
<style>
blockquote{
	font:inherit;
	font-size:60%;
	font-style:normal;
	line-height:1.0em;
	color:rgba(0,0,0,0.5);
}

.gutter{
	display: none;
}

.highlight, .gist-highlight {
margin-bottom: 1.8em;
background: #002b36;
overflow-y: hidden;
overflow-x: auto;
}
</style>
-->

<!-- mathjax config similar to math.stackexchange  -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

<!-- the following line is incorrect! -->
<!--
<script type="text/javascript" src="https://stackedit.io/libs/MathJax/MathJax.js?config=TeX-AMS_HTML"></script>
-->



<!--return to top-->
<style>
	.returnTop {
		position: fixed;
		_position: absolute;
		right: 10px;
		bottom: 200px;
		_bottom: auto;
		display: none;
		width: 40px;
		height: 40px;
		border: 1px solid #61b72e;
		border-radius: 4px;
		background: #fff;
		box-shadow: 0 0 5px #F5F5F5;
		text-indent: -9999px;
		cursor: pointer;
	}
	.returnTop .s {
		position: absolute;
		top: -2px;
		_top: -20px;
		left: 10px;
		width: 0;
		height: 0;
		border-width: 10px;
		border-color: transparent transparent #61b72e;
		border-style: dashed dashed solid;
	}
	.returnTop .b {
		position: absolute;
		top: 18px;
		left: 16px;
		height: 12px;
		width: 8px;
		background: #61b72e;
	}
</style>
<div class="returnTop" title="嗖的就上去了！">
	<span class="s"></span>
	<span class="b"></span>
	返回顶部
</div>
<script type="text/javascript">
$(function(){
$(window).bind("scroll", function(){

var scrollTopNum = $(document).scrollTop(),
winHeight = $(window).height(),
returnTop = $("div.returnTop");

(scrollTopNum > 0) ? returnTop.fadeIn("fast") : returnTop.fadeOut("fast");

if (!-[1,]&&!window.XMLHttpRequest) {
returnTop.css("top", scrollTopNum + winHeight - 200);
}

});

$("div.returnTop").click(function() {
$("html, body").animate({ scrollTop: 0 }, 100);
});

});
</script>

	</footer>
	
	













</body>
</html>
